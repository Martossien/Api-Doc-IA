import{s as Se,k as f,e as s,m as Oe,d as y,o as x,c as l,a as h,y as g,f as o,z as be,i as De,g as e,n as ve}from"../chunks/BGNgVYh3.js";import{g as Ne}from"../chunks/D0QH3NT1.js";import{S as $e,i as Pe}from"../chunks/C6dEUarp.js";const{document:Ve}=Ne;function ze(n){let a,r,t,d,p="Administration API v2",M,v,i='<div class="flex items-center space-x-4"><div id="connection-status" class="flex items-center"><div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div> <span class="text-sm">Connecting...</span></div> <div id="auth-status" class="text-sm text-gray-600">Checking authentication...</div></div> <div class="flex space-x-2"><button onclick="loadConfig()" class="px-4 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700">Recharger</button> <button onclick="saveConfig()" class="px-4 py-2 bg-green-600 text-white rounded text-sm hover:bg-green-700">Sauvegarder</button></div>',m,c,_,Q='<h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Configuration LLM</h2> <div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Mod√®le par d√©faut</label> <input type="text" id="default_model" class="w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="gpt-4o-mini"/></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Temp√©rature (0.0-2.0)</label> <input type="range" id="temperature" min="0" max="2" step="0.1" value="0.7" class="w-full"/> <span id="temperature-value" class="text-sm text-gray-600">0.7</span></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Max Tokens</label> <input type="number" id="max_tokens" class="w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="4096"/></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Top P (0.0-1.0)</label> <input type="range" id="top_p" min="0" max="1" step="0.05" value="0.9" class="w-full"/> <span id="top_p-value" class="text-sm text-gray-600">0.9</span></div></div>',R,k,W='<h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">üö¶ Limites Syst√®me</h2> <div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Requests par minute</label> <input type="number" id="rate_limit_requests" class="w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="60"/></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Tokens par minute</label> <input type="number" id="rate_limit_tokens" class="w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="40000"/></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Timeout (secondes)</label> <input type="number" id="request_timeout" class="w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="120"/></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Retry attempts</label> <input type="number" id="retry_attempts" class="w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="3"/></div></div>',U,w,he='<h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">‚ö° Fonctionnalit√©s</h2> <div class="space-y-4"><div class="flex items-center"><input type="checkbox" id="streaming_enabled" class="mr-3"/> <label class="text-sm font-medium text-gray-700 dark:text-gray-300">Streaming activ√©</label></div> <div class="flex items-center"><input type="checkbox" id="file_processing_enabled" class="mr-3"/> <label class="text-sm font-medium text-gray-700 dark:text-gray-300">Traitement fichiers</label></div> <div class="flex items-center"><input type="checkbox" id="web_search_enabled" class="mr-3"/> <label class="text-sm font-medium text-gray-700 dark:text-gray-300">Recherche web</label></div> <div class="flex items-center"><input type="checkbox" id="memory_enabled" class="mr-3"/> <label class="text-sm font-medium text-gray-700 dark:text-gray-300">M√©moire conversationnelle</label></div> <div><label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Max file size (MB)</label> <input type="number" id="max_file_size" class="w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="50"/></div></div>',de,A,S,ke="üß† Gestion M√©moire",oe,I,G,we='<label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">TTL m√©moire (secondes)</label> <input type="number" id="memory_ttl" class="w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="3600"/>',ie,J,Ie='<label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Max entr√©es m√©moire</label> <input type="number" id="max_memory_entries" class="w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="100"/>',ce,O,N,Ce="Strat√©gie cleanup",me,E,T,Ee="LRU (Least Recently Used)",L,Te="FIFO (First In, First Out)",B,Le="TTL Based",ue,q,$,Be="üìù Templates de Prompts",ge,H,X,Me='<label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Template syst√®me par d√©faut</label> <textarea id="default_system_template" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="Vous √™tes un assistant IA utile et informatif..."></textarea>',pe,P,z,Ae="Template d'erreur",fe,D,xe,F,qe='<h2 class="text-white text-lg font-semibold mb-4">üìä Monitoring Live</h2> <div id="logs" style="max-height: 300px; overflow-y: auto;"><div class="text-gray-400">[Initialisation] Interface charg√©e...</div></div>';return{c(){a=f(),r=s("div"),t=s("div"),d=s("h1"),d.textContent=p,M=f(),v=s("div"),v.innerHTML=i,m=f(),c=s("div"),_=s("div"),_.innerHTML=Q,R=f(),k=s("div"),k.innerHTML=W,U=f(),w=s("div"),w.innerHTML=he,de=f(),A=s("div"),S=s("h2"),S.textContent=ke,oe=f(),I=s("div"),G=s("div"),G.innerHTML=we,ie=f(),J=s("div"),J.innerHTML=Ie,ce=f(),O=s("div"),N=s("label"),N.textContent=Ce,me=f(),E=s("select"),T=s("option"),T.textContent=Ee,L=s("option"),L.textContent=Te,B=s("option"),B.textContent=Le,ue=f(),q=s("div"),$=s("h2"),$.textContent=Be,ge=f(),H=s("div"),X=s("div"),X.innerHTML=Me,pe=f(),P=s("div"),z=s("label"),z.textContent=Ae,fe=f(),D=s("textarea"),xe=f(),F=s("div"),F.innerHTML=qe,this.h()},l(j){Oe("svelte-rl0kde",Ve.head).forEach(y),a=x(j),r=l(j,"DIV",{class:!0});var He=h(r);t=l(He,"DIV",{class:!0});var C=h(t);d=l(C,"H1",{class:!0,"data-svelte-h":!0}),g(d)!=="svelte-k8awjc"&&(d.textContent=p),M=x(C),v=l(C,"DIV",{class:!0,"data-svelte-h":!0}),g(v)!=="svelte-1iiqz"&&(v.innerHTML=i),m=x(C),c=l(C,"DIV",{class:!0});var V=h(c);_=l(V,"DIV",{class:!0,"data-svelte-h":!0}),g(_)!=="svelte-1f07pbf"&&(_.innerHTML=Q),R=x(V),k=l(V,"DIV",{class:!0,"data-svelte-h":!0}),g(k)!=="svelte-1anpxlz"&&(k.innerHTML=W),U=x(V),w=l(V,"DIV",{class:!0,"data-svelte-h":!0}),g(w)!=="svelte-33acrm"&&(w.innerHTML=he),de=x(V),A=l(V,"DIV",{class:!0});var Z=h(A);S=l(Z,"H2",{class:!0,"data-svelte-h":!0}),g(S)!=="svelte-16l8usk"&&(S.textContent=ke),oe=x(Z),I=l(Z,"DIV",{class:!0});var K=h(I);G=l(K,"DIV",{"data-svelte-h":!0}),g(G)!=="svelte-15myfuq"&&(G.innerHTML=we),ie=x(K),J=l(K,"DIV",{"data-svelte-h":!0}),g(J)!=="svelte-1h1rg3o"&&(J.innerHTML=Ie),ce=x(K),O=l(K,"DIV",{});var ee=h(O);N=l(ee,"LABEL",{class:!0,"data-svelte-h":!0}),g(N)!=="svelte-kdu968"&&(N.textContent=Ce),me=x(ee),E=l(ee,"SELECT",{id:!0,class:!0});var te=h(E);T=l(te,"OPTION",{"data-svelte-h":!0}),g(T)!=="svelte-41itm5"&&(T.textContent=Ee),L=l(te,"OPTION",{"data-svelte-h":!0}),g(L)!=="svelte-1fojcpm"&&(L.textContent=Te),B=l(te,"OPTION",{"data-svelte-h":!0}),g(B)!=="svelte-vwupzb"&&(B.textContent=Le),te.forEach(y),ee.forEach(y),K.forEach(y),Z.forEach(y),V.forEach(y),ue=x(C),q=l(C,"DIV",{class:!0});var ae=h(q);$=l(ae,"H2",{class:!0,"data-svelte-h":!0}),g($)!=="svelte-hn190k"&&($.textContent=Be),ge=x(ae),H=l(ae,"DIV",{class:!0});var re=h(H);X=l(re,"DIV",{"data-svelte-h":!0}),g(X)!=="svelte-9n9d3e"&&(X.innerHTML=Me),pe=x(re),P=l(re,"DIV",{});var se=h(P);z=l(se,"LABEL",{class:!0,"data-svelte-h":!0}),g(z)!=="svelte-1owls98"&&(z.textContent=Ae),fe=x(se),D=l(se,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),h(D).forEach(y),se.forEach(y),re.forEach(y),ae.forEach(y),xe=x(C),F=l(C,"DIV",{class:!0,"data-svelte-h":!0}),g(F)!=="svelte-1o5pq3r"&&(F.innerHTML=qe),C.forEach(y),He.forEach(y),this.h()},h(){Ve.title="Administration API v2",o(d,"class","text-3xl font-bold text-gray-900 dark:text-white mb-8"),o(v,"class","bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-8 flex justify-between items-center"),o(_,"class","bg-white dark:bg-gray-800 p-6 rounded-lg shadow"),o(k,"class","bg-white dark:bg-gray-800 p-6 rounded-lg shadow"),o(w,"class","bg-white dark:bg-gray-800 p-6 rounded-lg shadow"),o(S,"class","text-xl font-semibold text-gray-900 dark:text-white mb-4"),o(N,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),T.__value="lru",be(T,T.__value),L.__value="fifo",be(L,L.__value),B.__value="ttl",be(B,B.__value),o(E,"id","memory_cleanup_strategy"),o(E,"class","w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"),o(I,"class","space-y-4"),o(A,"class","bg-white dark:bg-gray-800 p-6 rounded-lg shadow"),o(c,"class","grid grid-cols-1 lg:grid-cols-2 gap-8"),o($,"class","text-xl font-semibold text-gray-900 dark:text-white mb-4"),o(z,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),o(D,"id","error_template"),o(D,"rows","4"),o(D,"class","w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"),o(D,"placeholder","Une erreur s'est produite : "+error),o(H,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),o(q,"class","mt-8 bg-white dark:bg-gray-800 p-6 rounded-lg shadow"),o(F,"class","mt-8 bg-black text-green-400 p-6 rounded-lg font-mono text-sm"),o(t,"class","max-w-6xl mx-auto p-8 w-full"),o(r,"class","flex flex-col justify-between w-full overflow-y-auto h-screen")},m(j,ye){De(j,a,ye),De(j,r,ye),e(r,t),e(t,d),e(t,M),e(t,v),e(t,m),e(t,c),e(c,_),e(c,R),e(c,k),e(c,U),e(c,w),e(c,de),e(c,A),e(A,S),e(A,oe),e(A,I),e(I,G),e(I,ie),e(I,J),e(I,ce),e(I,O),e(O,N),e(O,me),e(O,E),e(E,T),e(E,L),e(E,B),e(t,ue),e(t,q),e(q,$),e(q,ge),e(q,H),e(H,X),e(H,pe),e(H,P),e(P,z),e(P,fe),e(P,D),e(t,xe),e(t,F)},p:ve,i:ve,o:ve,d(j){j&&(y(a),y(r))}}}function u(n,a="info"){const r=new Date().toLocaleTimeString(),t=a==="error"?"text-red-400":a==="success"?"text-green-400":a==="warning"?"text-yellow-400":"text-gray-300",d=document.getElementById("logs");if(d){const p=document.createElement("div");p.className=`mb-1 ${t}`,p.innerHTML=`<span class="text-gray-500">[${r}]</span> ${n}`,d.appendChild(p),d.scrollTop=d.scrollHeight}console.log(` [${r}] ${n}`)}function Y(n,a){const r=document.getElementById("connection-status");if(r){const t=r.querySelector("div"),d=r.querySelector("span");n==="connected"?(t.className="w-3 h-3 bg-green-500 rounded-full mr-2",d.textContent=a||"Connected"):n==="error"?(t.className="w-3 h-3 bg-red-500 rounded-full mr-2",d.textContent=a||"Connection Error"):(t.className="w-3 h-3 bg-yellow-500 rounded-full mr-2",d.textContent=a||"Connecting...")}}function le(n){const a=document.getElementById("auth-status");a&&(a.textContent=n)}function Fe(n){const a=n.llm||{};b("default_model",a.default_model||""),b("temperature",a.temperature||.7),b("max_tokens",a.max_tokens||4096),b("top_p",a.top_p||.9);const r=n.system_limits||{};b("rate_limit_requests",r.rate_limit_requests||60),b("rate_limit_tokens",r.rate_limit_tokens||4e4),b("request_timeout",r.request_timeout||120),b("retry_attempts",r.retry_attempts||3);const t=n.processing_features||{};ne("streaming_enabled",t.streaming_enabled!==!1),ne("file_processing_enabled",t.file_processing_enabled!==!1),ne("web_search_enabled",t.web_search_enabled!==!1),ne("memory_enabled",t.memory_enabled!==!1),b("max_file_size",t.max_file_size||50);const d=n.memory_management||{};b("memory_ttl",d.ttl||3600),b("max_memory_entries",d.max_entries||100),b("memory_cleanup_strategy",d.cleanup_strategy||"lru");const p=n.templates||{};b("default_system_template",p.default_system||""),b("error_template",p.error||""),_e("temperature"),_e("top_p"),u(" Champs du formulaire mis √† jour","info")}function b(n,a){const r=document.getElementById(n);r&&(r.value=a)}function ne(n,a){const r=document.getElementById(n);r&&(r.checked=a)}function _e(n){const a=document.getElementById(n),r=document.getElementById(n+"-value");a&&r&&(r.textContent=a.value)}function je(){var n,a,r,t,d,p,M,v,i,m,c,_,Q,R,k,W,U,w;return{llm:{default_model:((n=document.getElementById("default_model"))==null?void 0:n.value)||"",temperature:parseFloat(((a=document.getElementById("temperature"))==null?void 0:a.value)||.7),max_tokens:parseInt(((r=document.getElementById("max_tokens"))==null?void 0:r.value)||4096),top_p:parseFloat(((t=document.getElementById("top_p"))==null?void 0:t.value)||.9)},system_limits:{rate_limit_requests:parseInt(((d=document.getElementById("rate_limit_requests"))==null?void 0:d.value)||60),rate_limit_tokens:parseInt(((p=document.getElementById("rate_limit_tokens"))==null?void 0:p.value)||4e4),request_timeout:parseInt(((M=document.getElementById("request_timeout"))==null?void 0:M.value)||120),retry_attempts:parseInt(((v=document.getElementById("retry_attempts"))==null?void 0:v.value)||3)},processing_features:{streaming_enabled:((i=document.getElementById("streaming_enabled"))==null?void 0:i.checked)||!1,file_processing_enabled:((m=document.getElementById("file_processing_enabled"))==null?void 0:m.checked)||!1,web_search_enabled:((c=document.getElementById("web_search_enabled"))==null?void 0:c.checked)||!1,memory_enabled:((_=document.getElementById("memory_enabled"))==null?void 0:_.checked)||!1,max_file_size:parseInt(((Q=document.getElementById("max_file_size"))==null?void 0:Q.value)||50)},memory_management:{ttl:parseInt(((R=document.getElementById("memory_ttl"))==null?void 0:R.value)||3600),max_entries:parseInt(((k=document.getElementById("max_memory_entries"))==null?void 0:k.value)||100),cleanup_strategy:((W=document.getElementById("memory_cleanup_strategy"))==null?void 0:W.value)||"lru"},templates:{default_system:((U=document.getElementById("default_system_template"))==null?void 0:U.value)||"",error:((w=document.getElementById("error_template"))==null?void 0:w.value)||""}}}function Re(n){let a={},r=!1,t=!1;async function d(){try{const i=await fetch("/api/v1/auths/",{credentials:"include"});if(i.ok){const m=await i.json();return r=!0,t=m.role==="admin",le(`‚úÖ ${m.role||"user"} (${m.name||"Unknown"})`),u(`Authentification r√©ussie - Role: ${m.role}`,"success"),t||(u("‚ö†Ô∏è ATTENTION: Acc√®s admin requis pour cette interface","warning"),le("‚ùå Admin access required")),!0}else return r=!1,t=!1,le("‚ùå Not authenticated"),u("Authentification √©chou√©e","error"),!1}catch(i){return r=!1,t=!1,le("‚ùå Auth error"),u("Erreur d'authentification: "+i.message,"error"),!1}}async function p(){if(!t){u("‚ùå Acc√®s admin requis pour charger la configuration","error");return}u("üì• Chargement de la configuration API v2...");try{const i=await fetch("/api/v1/configs/api_v2/admin/config",{credentials:"include"});i.ok?(a=await i.json(),Fe(a),Y("connected","Configuration loaded"),u("‚úÖ Configuration charg√©e avec succ√®s","success")):i.status===403?u("üö´ Acc√®s refus√© - Permissions admin requises","error"):i.status===401?u("üîí Non autoris√© - Connexion requise","error"):u(`‚ùå Erreur de chargement: ${i.status}`,"error")}catch(i){u("‚ùå Erreur de r√©seau: "+i.message,"error"),Y("error","Network Error")}}async function M(){if(!t){u("‚ùå Acc√®s admin requis pour sauvegarder","error");return}const i=je();u(" Sauvegarde de la configuration...");try{const m=await fetch("/api/v1/configs/api_v2/admin/config",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({config:i,reason:"Interface admin update",backup_current:!0})});if(m.ok)a=await m.json(),u("‚úÖ Configuration sauvegard√©e avec succ√®s","success"),Y("connected","Saved successfully");else{const c=await m.text();u(`‚ùå Erreur de sauvegarde: ${m.status} - ${c}`,"error")}}catch(m){u("‚ùå Erreur de r√©seau lors de la sauvegarde: "+m.message,"error")}}window.loadConfig=p,window.saveConfig=M,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",v):v();async function v(){u("üöÄ Interface d'administration API v2 initialis√©e"),Y("loading","Checking authentication..."),await d()&&t?await p():Y("error","Admin access required"),["temperature","top_p"].forEach(c=>{const _=document.getElementById(c);_&&_.addEventListener("input",()=>_e(c))}),u("üìã Interface pr√™te - "+(t?"Mode administrateur":"Acc√®s limit√©"))}return[]}class Xe extends $e{constructor(a){super(),Pe(this,a,Re,ze,Se,{})}}export{Xe as component};
//# sourceMappingURL=9.C5KqkgFG.js.map
