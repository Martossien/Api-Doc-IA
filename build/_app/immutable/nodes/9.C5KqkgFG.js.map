{"version":3,"file":"9.C5KqkgFG.js","sources":["../../../../../../src/routes/(app)/admin/api-v2-config/+page.svelte"],"sourcesContent":["<!-- Interface d'administration API v2 compl√®te - Version Simple -->\n<svelte:head>\n\t<title>Administration API v2</title>\n</svelte:head>\n\n<div class=\"flex flex-col justify-between w-full overflow-y-auto h-screen\">\n\t<div class=\"max-w-6xl mx-auto p-8 w-full\">\n\t\t<h1 class=\"text-3xl font-bold text-gray-900 dark:text-white mb-8\">\n\t\t\t Administration API v2\n\t\t</h1>\n\t\t\n\t\t<!-- Status Bar -->\n\t\t<div class=\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow mb-8 flex justify-between items-center\">\n\t\t\t<div class=\"flex items-center space-x-4\">\n\t\t\t\t<div id=\"connection-status\" class=\"flex items-center\">\n\t\t\t\t\t<div class=\"w-3 h-3 bg-yellow-500 rounded-full mr-2\"></div>\n\t\t\t\t\t<span class=\"text-sm\">Connecting...</span>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"auth-status\" class=\"text-sm text-gray-600\">\n\t\t\t\t\tChecking authentication...\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"flex space-x-2\">\n\t\t\t\t<button onclick=\"loadConfig()\" class=\"px-4 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700\">\n\t\t\t\t\t Recharger\n\t\t\t\t</button>\n\t\t\t\t<button onclick=\"saveConfig()\" class=\"px-4 py-2 bg-green-600 text-white rounded text-sm hover:bg-green-700\">\n\t\t\t\t\t Sauvegarder\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Configuration Sections -->\n\t\t<div class=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n\t\t\t\n\t\t\t<!-- Configuration LLM -->\n\t\t\t<div class=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n\t\t\t\t<h2 class=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\n\t\t\t\t\t Configuration LLM\n\t\t\t\t</h2>\n\t\t\t\t<div class=\"space-y-4\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n\t\t\t\t\t\t\tMod√®le par d√©faut\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type=\"text\" id=\"default_model\" \n\t\t\t\t\t\t\t   class=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n\t\t\t\t\t\t\t   placeholder=\"gpt-4o-mini\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n\t\t\t\t\t\t\tTemp√©rature (0.0-2.0)\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type=\"range\" id=\"temperature\" min=\"0\" max=\"2\" step=\"0.1\" value=\"0.7\"\n\t\t\t\t\t\t\t   class=\"w-full\">\n\t\t\t\t\t\t<span id=\"temperature-value\" class=\"text-sm text-gray-600\">0.7</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n\t\t\t\t\t\t\tMax Tokens\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type=\"number\" id=\"max_tokens\" \n\t\t\t\t\t\t\t   class=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n\t\t\t\t\t\t\t   placeholder=\"4096\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n\t\t\t\t\t\t\tTop P (0.0-1.0)\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type=\"range\" id=\"top_p\" min=\"0\" max=\"1\" step=\"0.05\" value=\"0.9\"\n\t\t\t\t\t\t\t   class=\"w-full\">\n\t\t\t\t\t\t<span id=\"top_p-value\" class=\"text-sm text-gray-600\">0.9</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Limites Syst√®me -->\n\t\t\t<div class=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n\t\t\t\t<h2 class=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\n\t\t\t\t\tüö¶ Limites Syst√®me\n\t\t\t\t</h2>\n\t\t\t\t<div class=\"space-y-4\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n\t\t\t\t\t\t\tRequests par minute\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type=\"number\" id=\"rate_limit_requests\" \n\t\t\t\t\t\t\t   class=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n\t\t\t\t\t\t\t   placeholder=\"60\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n\t\t\t\t\t\t\tTokens par minute\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type=\"number\" id=\"rate_limit_tokens\" \n\t\t\t\t\t\t\t   class=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n\t\t\t\t\t\t\t   placeholder=\"40000\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n\t\t\t\t\t\t\tTimeout (secondes)\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type=\"number\" id=\"request_timeout\" \n\t\t\t\t\t\t\t   class=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n\t\t\t\t\t\t\t   placeholder=\"120\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n\t\t\t\t\t\t\tRetry attempts\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type=\"number\" id=\"retry_attempts\" \n\t\t\t\t\t\t\t   class=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n\t\t\t\t\t\t\t   placeholder=\"3\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Fonctionnalit√©s de Traitement -->\n\t\t\t<div class=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n\t\t\t\t<h2 class=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\n\t\t\t\t\t‚ö° Fonctionnalit√©s\n\t\t\t\t</h2>\n\t\t\t\t<div class=\"space-y-4\">\n\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t<input type=\"checkbox\" id=\"streaming_enabled\" class=\"mr-3\">\n\t\t\t\t\t\t<label class=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n\t\t\t\t\t\t\tStreaming activ√©\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t<input type=\"checkbox\" id=\"file_processing_enabled\" class=\"mr-3\">\n\t\t\t\t\t\t<label class=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n\t\t\t\t\t\t\tTraitement fichiers\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t<input type=\"checkbox\" id=\"web_search_enabled\" class=\"mr-3\">\n\t\t\t\t\t\t<label class=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n\t\t\t\t\t\t\tRecherche web\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t<input type=\"checkbox\" id=\"memory_enabled\" class=\"mr-3\">\n\t\t\t\t\t\t<label class=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n\t\t\t\t\t\t\tM√©moire conversationnelle\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n\t\t\t\t\t\t\tMax file size (MB)\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type=\"number\" id=\"max_file_size\" \n\t\t\t\t\t\t\t   class=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n\t\t\t\t\t\t\t   placeholder=\"50\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Gestion M√©moire -->\n\t\t\t<div class=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n\t\t\t\t<h2 class=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\n\t\t\t\t\tüß† Gestion M√©moire\n\t\t\t\t</h2>\n\t\t\t\t<div class=\"space-y-4\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n\t\t\t\t\t\t\tTTL m√©moire (secondes)\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type=\"number\" id=\"memory_ttl\" \n\t\t\t\t\t\t\t   class=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n\t\t\t\t\t\t\t   placeholder=\"3600\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n\t\t\t\t\t\t\tMax entr√©es m√©moire\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type=\"number\" id=\"max_memory_entries\" \n\t\t\t\t\t\t\t   class=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n\t\t\t\t\t\t\t   placeholder=\"100\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n\t\t\t\t\t\t\tStrat√©gie cleanup\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<select id=\"memory_cleanup_strategy\" \n\t\t\t\t\t\t\t\tclass=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\">\n\t\t\t\t\t\t\t<option value=\"lru\">LRU (Least Recently Used)</option>\n\t\t\t\t\t\t\t<option value=\"fifo\">FIFO (First In, First Out)</option>\n\t\t\t\t\t\t\t<option value=\"ttl\">TTL Based</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Templates Section -->\n\t\t<div class=\"mt-8 bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n\t\t\t<h2 class=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\n\t\t\t\tüìù Templates de Prompts\n\t\t\t</h2>\n\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n\t\t\t\t<div>\n\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n\t\t\t\t\t\tTemplate syst√®me par d√©faut\n\t\t\t\t\t</label>\n\t\t\t\t\t<textarea id=\"default_system_template\" rows=\"4\"\n\t\t\t\t\t\t\t  class=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n\t\t\t\t\t\t\t  placeholder=\"Vous √™tes un assistant IA utile et informatif...\"></textarea>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<label class=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n\t\t\t\t\t\tTemplate d'erreur\n\t\t\t\t\t</label>\n\t\t\t\t\t<textarea id=\"error_template\" rows=\"4\"\n\t\t\t\t\t\t\t  class=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n\t\t\t\t\t\t\t  placeholder=\"Une erreur s'est produite : {error}\"></textarea>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Live Monitoring -->\n\t\t<div class=\"mt-8 bg-black text-green-400 p-6 rounded-lg font-mono text-sm\">\n\t\t\t<h2 class=\"text-white text-lg font-semibold mb-4\">üìä Monitoring Live</h2>\n\t\t\t<div id=\"logs\" style=\"max-height: 300px; overflow-y: auto;\">\n\t\t\t\t<div class=\"text-gray-400\">[Initialisation] Interface charg√©e...</div>\n\t\t\t</div>\n\t\t</div>\n</div>\n</div>\n\n<script>\n\t// Configuration Management - Client-side JavaScript\n\t\n\tlet currentConfig = {};\n\tlet isAuthenticated = false;\n\tlet isAdmin = false;\n\t\n\tfunction addLog(message, type = 'info') {\n\t\tconst timestamp = new Date().toLocaleTimeString();\n\t\tconst color = type === 'error' ? 'text-red-400' : \n\t\t             type === 'success' ? 'text-green-400' : \n\t\t             type === 'warning' ? 'text-yellow-400' : 'text-gray-300';\n\t\t\n\t\tconst logElement = document.getElementById('logs');\n\t\tif (logElement) {\n\t\t\tconst logEntry = document.createElement('div');\n\t\t\tlogEntry.className = `mb-1 ${color}`;\n\t\t\tlogEntry.innerHTML = `<span class=\"text-gray-500\">[${timestamp}]</span> ${message}`;\n\t\t\tlogElement.appendChild(logEntry);\n\t\t\tlogElement.scrollTop = logElement.scrollHeight;\n\t\t}\n\t\t\n\t\tconsole.log(` [${timestamp}] ${message}`);\n\t}\n\t\n\tfunction updateConnectionStatus(status, message) {\n\t\tconst statusElement = document.getElementById('connection-status');\n\t\tif (statusElement) {\n\t\t\tconst indicator = statusElement.querySelector('div');\n\t\t\tconst text = statusElement.querySelector('span');\n\t\t\t\n\t\t\tif (status === 'connected') {\n\t\t\t\tindicator.className = 'w-3 h-3 bg-green-500 rounded-full mr-2';\n\t\t\t\ttext.textContent = message || 'Connected';\n\t\t\t} else if (status === 'error') {\n\t\t\t\tindicator.className = 'w-3 h-3 bg-red-500 rounded-full mr-2';\n\t\t\t\ttext.textContent = message || 'Connection Error';\n\t\t\t} else {\n\t\t\t\tindicator.className = 'w-3 h-3 bg-yellow-500 rounded-full mr-2';\n\t\t\t\ttext.textContent = message || 'Connecting...';\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction updateAuthStatus(message) {\n\t\tconst authElement = document.getElementById('auth-status');\n\t\tif (authElement) {\n\t\t\tauthElement.textContent = message;\n\t\t}\n\t}\n\t\n\tasync function checkAuth() {\n\t\ttry {\n\t\t\tconst response = await fetch('/api/v1/auths/', { credentials: 'include' });\n\t\t\t\n\t\t\tif (response.ok) {\n\t\t\t\tconst data = await response.json();\n\t\t\t\tisAuthenticated = true;\n\t\t\t\tisAdmin = data.role === 'admin';\n\t\t\t\t\n\t\t\t\tupdateAuthStatus(`‚úÖ ${data.role || 'user'} (${data.name || 'Unknown'})`);\n\t\t\t\taddLog(`Authentification r√©ussie - Role: ${data.role}`, 'success');\n\t\t\t\t\n\t\t\t\tif (!isAdmin) {\n\t\t\t\t\taddLog('‚ö†Ô∏è ATTENTION: Acc√®s admin requis pour cette interface', 'warning');\n\t\t\t\t\tupdateAuthStatus('‚ùå Admin access required');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tisAuthenticated = false;\n\t\t\t\tisAdmin = false;\n\t\t\t\tupdateAuthStatus('‚ùå Not authenticated');\n\t\t\t\taddLog('Authentification √©chou√©e', 'error');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tisAuthenticated = false;\n\t\t\tisAdmin = false;\n\t\t\tupdateAuthStatus('‚ùå Auth error');\n\t\t\taddLog('Erreur d\\'authentification: ' + e.message, 'error');\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tasync function loadConfig() {\n\t\tif (!isAdmin) {\n\t\t\taddLog('‚ùå Acc√®s admin requis pour charger la configuration', 'error');\n\t\t\treturn;\n\t\t}\n\t\t\n\t\taddLog('üì• Chargement de la configuration API v2...');\n\t\t\n\t\ttry {\n\t\t\tconst response = await fetch('/api/v1/configs/api_v2/admin/config', { \n\t\t\t\tcredentials: 'include' \n\t\t\t});\n\t\t\t\n\t\t\tif (response.ok) {\n\t\t\t\tcurrentConfig = await response.json();\n\t\t\t\tpopulateFormFields(currentConfig);\n\t\t\t\tupdateConnectionStatus('connected', 'Configuration loaded');\n\t\t\t\taddLog('‚úÖ Configuration charg√©e avec succ√®s', 'success');\n\t\t\t} else if (response.status === 403) {\n\t\t\t\taddLog('üö´ Acc√®s refus√© - Permissions admin requises', 'error');\n\t\t\t} else if (response.status === 401) {\n\t\t\t\taddLog('üîí Non autoris√© - Connexion requise', 'error');\n\t\t\t} else {\n\t\t\t\taddLog(`‚ùå Erreur de chargement: ${response.status}`, 'error');\n\t\t\t}\n\t\t} catch (e) {\n\t\t\taddLog('‚ùå Erreur de r√©seau: ' + e.message, 'error');\n\t\t\tupdateConnectionStatus('error', 'Network Error');\n\t\t}\n\t}\n\t\n\tfunction populateFormFields(config) {\n\t\t// Populate LLM Configuration\n\t\tconst llmConfig = config.llm || {};\n\t\tsetFieldValue('default_model', llmConfig.default_model || '');\n\t\tsetFieldValue('temperature', llmConfig.temperature || 0.7);\n\t\tsetFieldValue('max_tokens', llmConfig.max_tokens || 4096);\n\t\tsetFieldValue('top_p', llmConfig.top_p || 0.9);\n\t\t\n\t\t// Populate System Limits\n\t\tconst limits = config.system_limits || {};\n\t\tsetFieldValue('rate_limit_requests', limits.rate_limit_requests || 60);\n\t\tsetFieldValue('rate_limit_tokens', limits.rate_limit_tokens || 40000);\n\t\tsetFieldValue('request_timeout', limits.request_timeout || 120);\n\t\tsetFieldValue('retry_attempts', limits.retry_attempts || 3);\n\t\t\n\t\t// Populate Processing Features\n\t\tconst features = config.processing_features || {};\n\t\tsetCheckboxValue('streaming_enabled', features.streaming_enabled !== false);\n\t\tsetCheckboxValue('file_processing_enabled', features.file_processing_enabled !== false);\n\t\tsetCheckboxValue('web_search_enabled', features.web_search_enabled !== false);\n\t\tsetCheckboxValue('memory_enabled', features.memory_enabled !== false);\n\t\tsetFieldValue('max_file_size', features.max_file_size || 50);\n\t\t\n\t\t// Populate Memory Management\n\t\tconst memory = config.memory_management || {};\n\t\tsetFieldValue('memory_ttl', memory.ttl || 3600);\n\t\tsetFieldValue('max_memory_entries', memory.max_entries || 100);\n\t\tsetFieldValue('memory_cleanup_strategy', memory.cleanup_strategy || 'lru');\n\t\t\n\t\t// Populate Templates\n\t\tconst templates = config.templates || {};\n\t\tsetFieldValue('default_system_template', templates.default_system || '');\n\t\tsetFieldValue('error_template', templates.error || '');\n\t\t\n\t\t// Update range display values\n\t\tupdateRangeDisplay('temperature');\n\t\tupdateRangeDisplay('top_p');\n\t\t\n\t\taddLog(' Champs du formulaire mis √† jour', 'info');\n\t}\n\t\n\tfunction setFieldValue(fieldId, value) {\n\t\tconst field = document.getElementById(fieldId);\n\t\tif (field) {\n\t\t\tfield.value = value;\n\t\t}\n\t}\n\t\n\tfunction setCheckboxValue(fieldId, value) {\n\t\tconst field = document.getElementById(fieldId);\n\t\tif (field) {\n\t\t\tfield.checked = value;\n\t\t}\n\t}\n\t\n\tfunction updateRangeDisplay(fieldId) {\n\t\tconst field = document.getElementById(fieldId);\n\t\tconst display = document.getElementById(fieldId + '-value');\n\t\tif (field && display) {\n\t\t\tdisplay.textContent = field.value;\n\t\t}\n\t}\n\t\n\tfunction getFormConfig() {\n\t\treturn {\n\t\t\tllm: {\n\t\t\t\tdefault_model: document.getElementById('default_model')?.value || '',\n\t\t\t\ttemperature: parseFloat(document.getElementById('temperature')?.value || 0.7),\n\t\t\t\tmax_tokens: parseInt(document.getElementById('max_tokens')?.value || 4096),\n\t\t\t\ttop_p: parseFloat(document.getElementById('top_p')?.value || 0.9)\n\t\t\t},\n\t\t\tsystem_limits: {\n\t\t\t\trate_limit_requests: parseInt(document.getElementById('rate_limit_requests')?.value || 60),\n\t\t\t\trate_limit_tokens: parseInt(document.getElementById('rate_limit_tokens')?.value || 40000),\n\t\t\t\trequest_timeout: parseInt(document.getElementById('request_timeout')?.value || 120),\n\t\t\t\tretry_attempts: parseInt(document.getElementById('retry_attempts')?.value || 3)\n\t\t\t},\n\t\t\tprocessing_features: {\n\t\t\t\tstreaming_enabled: document.getElementById('streaming_enabled')?.checked || false,\n\t\t\t\tfile_processing_enabled: document.getElementById('file_processing_enabled')?.checked || false,\n\t\t\t\tweb_search_enabled: document.getElementById('web_search_enabled')?.checked || false,\n\t\t\t\tmemory_enabled: document.getElementById('memory_enabled')?.checked || false,\n\t\t\t\tmax_file_size: parseInt(document.getElementById('max_file_size')?.value || 50)\n\t\t\t},\n\t\t\tmemory_management: {\n\t\t\t\tttl: parseInt(document.getElementById('memory_ttl')?.value || 3600),\n\t\t\t\tmax_entries: parseInt(document.getElementById('max_memory_entries')?.value || 100),\n\t\t\t\tcleanup_strategy: document.getElementById('memory_cleanup_strategy')?.value || 'lru'\n\t\t\t},\n\t\t\ttemplates: {\n\t\t\t\tdefault_system: document.getElementById('default_system_template')?.value || '',\n\t\t\t\terror: document.getElementById('error_template')?.value || ''\n\t\t\t}\n\t\t};\n\t}\n\t\n\tasync function saveConfig() {\n\t\tif (!isAdmin) {\n\t\t\taddLog('‚ùå Acc√®s admin requis pour sauvegarder', 'error');\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tconst newConfig = getFormConfig();\n\t\taddLog(' Sauvegarde de la configuration...');\n\t\t\n\t\ttry {\n\t\t\tconst response = await fetch('/api/v1/configs/api_v2/admin/config', {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tcredentials: 'include',\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tconfig: newConfig,\n\t\t\t\t\treason: 'Interface admin update',\n\t\t\t\t\tbackup_current: true\n\t\t\t\t})\n\t\t\t});\n\t\t\t\n\t\t\tif (response.ok) {\n\t\t\t\tcurrentConfig = await response.json();\n\t\t\t\taddLog('‚úÖ Configuration sauvegard√©e avec succ√®s', 'success');\n\t\t\t\tupdateConnectionStatus('connected', 'Saved successfully');\n\t\t\t} else {\n\t\t\t\tconst error = await response.text();\n\t\t\t\taddLog(`‚ùå Erreur de sauvegarde: ${response.status} - ${error}`, 'error');\n\t\t\t}\n\t\t} catch (e) {\n\t\t\taddLog('‚ùå Erreur de r√©seau lors de la sauvegarde: ' + e.message, 'error');\n\t\t}\n\t}\n\t\n\t// Make functions globally available\n\twindow.loadConfig = loadConfig;\n\twindow.saveConfig = saveConfig;\n\t\n\t// Initialize when DOM is ready\n\tif (document.readyState === 'loading') {\n\t\tdocument.addEventListener('DOMContentLoaded', initializeInterface);\n\t} else {\n\t\tinitializeInterface();\n\t}\n\t\n\tasync function initializeInterface() {\n\t\taddLog('üöÄ Interface d\\'administration API v2 initialis√©e');\n\t\t\n\t\t// Check authentication first\n\t\tupdateConnectionStatus('loading', 'Checking authentication...');\n\t\tconst authOk = await checkAuth();\n\t\t\n\t\tif (authOk && isAdmin) {\n\t\t\t// Load current configuration\n\t\t\tawait loadConfig();\n\t\t} else {\n\t\t\tupdateConnectionStatus('error', 'Admin access required');\n\t\t}\n\t\t\n\t\t// Setup range value updates\n\t\tconst rangeInputs = ['temperature', 'top_p'];\n\t\trangeInputs.forEach(id => {\n\t\t\tconst input = document.getElementById(id);\n\t\t\tif (input) {\n\t\t\t\tinput.addEventListener('input', () => updateRangeDisplay(id));\n\t\t\t}\n\t\t});\n\t\t\n\t\taddLog('üìã Interface pr√™te - ' + (isAdmin ? 'Mode administrateur' : 'Acc√®s limit√©'));\n\t}\n</script>\n\n\n"],"names":["insert_hydration","target","div39","anchor","append_hydration","div38","h1","div5","div30","div11","div17","div24","div29","h23","div28","div25","div26","div27","label15","select","option0","option1","option2","div34","h24","div33","div31","div32","label17","textarea1","div37","addLog","message","type","timestamp","color","logElement","logEntry","updateConnectionStatus","status","statusElement","indicator","text","updateAuthStatus","authElement","populateFormFields","config","llmConfig","setFieldValue","limits","features","setCheckboxValue","memory","templates","updateRangeDisplay","fieldId","value","field","display","getFormConfig","_a","_b","_c","_d","_e","_f","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","_q","_r","currentConfig","isAuthenticated","isAdmin","checkAuth","response","data","e","loadConfig","saveConfig","newConfig","error","initializeInterface","id","input"],"mappings":"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"}